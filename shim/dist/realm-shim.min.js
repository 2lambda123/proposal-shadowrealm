!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):r.RealmShim=e()}(this,function(){"use strict";function r(r){var e=r.confinedWindow.Object;try{if(void 0===e)return;e.defineProperty(e.prototype,"__defineGetter__",{value:function(r,t){return e.defineProperty(this,r,{get:t})}}),e.defineProperty(e.prototype,"__defineSetter__",{value:function(r,t){return e.defineProperty(this,r,{set:t})}}),e.defineProperty(e.prototype,"__lookupGetter__",{value:function(r){for(var t,o=this;o&&void 0===(t=e.getOwnPropertyDescriptor(o,r));)o=e.getPrototypeOf(this);return t?t.get:void 0}}),e.defineProperty(e.prototype,"__lookupSetter__",{value:function(r){for(var t,o=this;o&&void 0===(t=e.getOwnPropertyDescriptor(o,r));)o=e.getPrototypeOf(this);return t?t.set:void 0}}),e.seal(e.prototype)}catch(r){}}function e(){R=!0}function t(){R=!1}function o(r){return r=r.replace(/\`/g,"\\`"),"\n        function "+U+'() {\n            with(arguments[0]) {\n                return (function(){\n                    "use strict";\n                    return eval(`'+r+"`);\n                }).call(this);\n            }\n        }\n    "}function n(r,e){var t=e.iframeDocument,o=e.confinedWindow,n=t.body,i=t.createElement("script");i.type="text/javascript",o[U]=void 0,i.appendChild(t.createTextNode(r)),n.appendChild(i),n.removeChild(i);var a=o[U];return o[U]=void 0,a}function i(r,i){if(r){r=o(r+""),e();var a=n(r,i),y=a.apply(i.thisValue,[i.globalProxy]);return t(),y}}function a(r){var e={eval:function(e){return i(e,r)}};return Object.setPrototypeOf(e.eval,r.Function),e.eval.toString=function(){return"function eval() { [shim code] }"},e.eval}function y(r){var e=r.confinedWindow,t=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t.pop();return i("(function anonymous("+t.join(", ")+"){\n"+n+"\n}).bind(this)",r)};return t.prototype=e.Function.prototype,Object.setPrototypeOf(t,t.prototype),t.prototype.constructor=t,t.toString=function(){return"function Function() { [shim code] }"},t}function p(r){r.Function=y(r),r.eval=a(r)}function u(){var r=document.createElement("iframe");return r.style.display="none",r.title="script",r.setAttribute("aria-hidden",!0),document.body.appendChild(r),r}function l(){var e=u(),t=e.contentDocument,o=e.contentWindow,n={iframe:e,iframeDocument:t,confinedWindow:o,thisValue:void 0,globalObject:void 0,globalProxy:void 0};return r(n),Object.assign(n,p(n)),n.globalProxy=new Proxy(n,j),n}function c(r,e,t){r.thisValue=t,r.globalObject=e}function f(r){var e=r.confinedWindow,t=F(e.Array(0)[k]()),o=F(e.String()[k]()),n=F(t),i=e.eval('(function*(){"use strict";yield arguments;})'),a=F(i),y=F(a),p=y.constructor;return{Array:e.Array,ArrayBuffer:e.ArrayBuffer,ArrayBufferPrototype:e.ArrayBuffer.prototype,ArrayIteratorPrototype:t,ArrayPrototype:e.Array.prototype,ArrayProto_values:e.Array.prototype.values,Boolean:e.Boolean,BooleanPrototype:e.Boolean.prototype,DataView:e.DataView,DataViewPrototype:e.DataView.prototype,Date:e.Date,DatePrototype:e.Date.prototype,decodeURI:e.decodeURI,decodeURIComponent:e.decodeURIComponent,encodeURI:e.encodeURI,encodeURIComponent:e.encodeURIComponent,Error:e.Error,ErrorPrototype:e.Error.prototype,eval:r.eval,EvalError:e.EvalError,EvalErrorPrototype:e.EvalError.prototype,Float32Array:e.Float32Array,Float32ArrayPrototype:e.Float32Array.prototype,Float64Array:e.Float64Array,Float64ArrayPrototype:e.Float64Array.prototype,Function:r.Function,FunctionPrototype:e.Function.prototype,Generator:a,GeneratorFunction:p,GeneratorPrototype:y,Int8Array:e.Int8Array,Int8ArrayPrototype:e.Int8Array.prototype,Int16Array:e.Int16Array,Int16ArrayPrototype:e.Int16Array.prototype,Int32Array:e.Int32Array,Int32ArrayPrototype:e.Int32Array.prototype,isFinite:e.isFinite,isNaN:e.isNaN,IteratorPrototype:n,JSON:e.JSON,Map:e.Map,MapIteratorPrototype:void 0,MapPrototype:e.Map.prototype,Math:e.Math,Number:e.Number,NumberPrototype:e.Number.prototype,Object:e.Object,ObjectPrototype:e.Object.prototype,ObjProto_toString:e.Object.prototype.toString,ObjProto_valueOf:e.Object.prototype.valueOf,parseFloat:e.parseFloat,parseInt:e.parseInt,Promise:e.Promise,PromisePrototype:e.Promise.prototype,Proxy:e.Proxy,RangeError:e.RangeError,RangeErrorPrototype:e.RangeError.prototype,ReferenceError:e.ReferenceError,ReferenceErrorPrototype:e.ReferenceError.prototype,Reflect:e.Reflect,RegExp:e.RegExp,RegExpPrototype:e.RegExp.prototype,Set:e.Set,SetIteratorPrototype:void 0,SetPrototype:e.Set.prototype,String:e.String,StringIteratorPrototype:o,StringPrototype:e.String.prototype,Symbol:e.Symbol,SymbolPrototype:e.Symbol.prototype,SyntaxError:e.SyntaxError,SyntaxErrorPrototype:e.SyntaxError.prototype,ThrowTypeError:void 0,TypedArray:void 0,TypedArrayPrototype:void 0,TypeError:e.TypeError,TypeErrorPrototype:e.TypeError.prototype,Uint8Array:e.Uint8Array,Uint8ArrayPrototype:e.Uint8Array.prototype,Uint8ClampedArray:e.Uint8ClampedArray,Uint8ClampedArrayPrototype:e.Uint8ClampedArray.prototype,Uint16Array:e.Uint16Array,Uint16ArrayPrototype:Uint16Array.prototype,Uint32Array:e.Uint32Array,Uint32ArrayPrototype:e.Uint32Array.prototype,URIError:e.URIError,URIErrorPrototype:e.URIError.prototype,WeakMap:e.WeakMap,WeakMapPrototype:e.WeakMap.prototype,WeakSet:e.WeakSet,WeakSetPrototype:e.WeakSet.prototype,Realm:$}}function v(r){var e=f(r);return{Array:{value:e.Array},ArrayBuffer:{value:e.ArrayBuffer},Boolean:{value:e.Boolean},DataView:{value:e.DataView},Date:{value:e.Date},decodeURI:{value:e.decodeURI},decodeURIComponent:{value:e.decodeURIComponent},encodeURI:{value:e.encodeURI},encodeURIComponent:{value:e.encodeURIComponent},Error:{value:e.Error},eval:{value:e.eval},EvalError:{value:e.EvalError},Float32Array:{value:e.Float32Array},Float64Array:{value:e.Float64Array},Function:{value:e.Function},Int8Array:{value:e.Int8Array},Int16Array:{value:e.Int16Array},Int32Array:{value:e.Int32Array},isFinite:{value:e.isFinite},isNaN:{value:e.isNaN},JSON:{value:e.JSON},Map:{value:e.Map},Math:{value:e.Math},Number:{value:e.Number},Object:{value:e.Object},parseFloat:{value:e.parseFloat},parseInt:{value:e.parseInt},Promise:{value:e.Promise},Proxy:{value:e.Proxy},RangeError:{value:e.RangeError},ReferenceError:{value:e.ReferenceError},Reflect:{value:e.Reflect},RegExp:{value:e.RegExp},Set:{value:e.Set},String:{value:e.String},Symbol:{value:e.Symbol},SyntaxError:{value:e.SyntaxError},TypeError:{value:e.TypeError},Uint8Array:{value:e.Uint8Array},Uint8ClampedArray:{value:e.Uint8ClampedArray},Uint16Array:{value:e.Uint16Array},Uint32Array:{value:e.Uint32Array},URIError:{value:e.URIError},WeakMap:{value:e.WeakMap},WeakSet:{value:e.WeakSet}}}function d(r){if(!r)throw new Error}function s(r){return"function"==typeof r}function b(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function m(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function E(r){var e=r[J];return d("object"===(void 0===e?"undefined":D(e))),e}function P(){var r=window[W];return r||(window[W]={}),r}function S(r,e){return new function r(){m(this,r),this[M]=e}(r)}function w(r,e,t){if(void 0===e){var o=r[N];e=Object.create(o.ObjectPrototype)}d("object"===(void 0===e?"undefined":D(e))),void 0===t&&(t=e),r[C]=e;var n=S(e,t);return r[_]=n,r}function A(r){var e=r[C],t=v(r[J]);return Object.defineProperties(e,t),e}function h(r){var e=f(r[J]);return r[N]=e,e}function g(r){var e,t=(e={},b(e,N,{}),b(e,C,void 0),b(e,_,void 0),b(e,B,void 0),b(e,V,void 0),b(e,G,void 0),b(e,H,void 0),b(e,J,l()),e);return void 0===r?h(t):t[N]=r,t}function I(r,e){var t=r[B];return void 0===t?e:(d(!0===s(t)),t.call(void 0,e))}function O(r,e,t,o){return d(!1!==o||!1===t),!0===o&&(r=I(r,e)),"string"!=typeof r?r:i(r,E(e))}var R=!1,j={get:function(r,e){return"eval"===e&&R?(t(),r.confinedWindow.eval):r.globalObject[e]},set:function(r,e,t){return r.globalObject[e]=t,!0},defineProperty:function(r,e,t){return Object.defineProperty(r.globalObject,e,t),!0},deleteProperty:function(r,e){return Reflect.deleteProperty(r.globalObject,e)},has:function(r,e){if("eval"===e&&R)return!0;if(e in r.globalObject)return!0;if(e in r.confinedWindow)throw new ReferenceError(e+" is not defined. If you are using typeof "+e+", you can change your program to use typeof global."+e+" instead");return!1},ownKeys:function(r){return Object.getOwnPropertyNames(r.globalObject)},getOwnPropertyDescriptor:function(r,e){return Object.getOwnPropertyDescriptor(r.globalObject,e)},isExtensible:function(r){return!0},getPrototypeOf:function(r){return null},setPrototypeOf:function(r,e){return null===e}},U="$RealmEvaluatorIIFE$",T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},F=Object.getPrototypeOf,k=("undefined"==typeof Symbol?"undefined":T(Symbol))&&Symbol.iterator||"@@iterator",x=function(){function r(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}(),D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},W=Symbol("Realm Slot"),N=Symbol("Intrinsics Slot"),C=Symbol("GlobalObject Slot"),M=Symbol("GlobalThisValue Slot"),_=Symbol("GlobalEnv Slot"),B=Symbol("EvalHook Slot"),V=Symbol("IsDirectEvalHook Slot"),G=Symbol("ImportHook Slot"),H=Symbol("ImportMetaHook Slot"),J=Symbol("Sandbox"),$=function(){function r(e){m(this,r);var t=this,o=P(),n=Object(e),i=n.importHook;if("inherit"===i)i=o[G];else if(void 0!==i&&!1===s(i))throw new TypeError;var a=n.importMetaHook;if("inherit"===a)a=o[H];else if(void 0!==a&&!1===s(a))throw new TypeError;var y=n.evalHook;if("inherit"===y)y=o[B];else if(void 0!==y&&!1===s(y))throw new TypeError;var p=n.isDirectEvalHook;if("inherit"===p)p=o[V];else if(void 0!==p&&!1===s(p))throw new TypeError;var u=n.intrinsics;if("inherit"===u)u=o[N];else if(void 0!==u)throw new TypeError;var l=n.thisValue;if(void 0!==l&&"object"!==(void 0===l?"undefined":D(l)))throw new TypeError;var f=g(u);t[W]=f,w(f,void 0,l),void 0===i&&(i=function(){throw new TypeError}),f[G]=i,void 0!==y&&(f[B]=y),void 0!==p&&(f[V]=p);var v=t.init;if(!s(v))throw new TypeError;v.call(t),c(f[J],f[C],f[_][M])}return x(r,[{key:"init",value:function(){var r=this;if("object"!==(void 0===r?"undefined":D(r)))throw new TypeError;if(!(W in r))throw new TypeError;A(r[W])}},{key:"eval",value:function(r){var e=this;if("object"!==(void 0===e?"undefined":D(e)))throw new TypeError;if(!(W in e))throw new TypeError;return O(r,e[W],!1,!1)}},{key:"stdlib",get:function(){var r=this;if("object"!==(void 0===r?"undefined":D(r)))throw new TypeError;if(!(W in r))throw new TypeError;return v(E(r[W]))}},{key:"intrinsics",get:function(){var r=this;if("object"!==(void 0===r?"undefined":D(r)))throw new TypeError;if(!(W in r))throw new TypeError;return f(E(r[W]).confinedWindow)}},{key:"global",get:function(){var r=this;if("object"!==(void 0===r?"undefined":D(r)))throw new TypeError;if(!(W in r))throw new TypeError;return r[W][C]}},{key:"thisValue",get:function(){var r=this;if("object"!==(void 0===r?"undefined":D(r)))throw new TypeError;if(!(W in r))throw new TypeError;return r[W][_][M]}}]),r}();return $.toString=function(){return"function Realm() { [shim code] }"},$});
//# sourceMappingURL=realm-shim.min.js.map
